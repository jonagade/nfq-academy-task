(function(e){function t(t){for(var r,n,c=t[0],o=t[1],u=t[2],p=0,m=[];p<c.length;p++)n=c[p],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&m.push(a[n][0]),a[n]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],r=!0,c=1;c<s.length;c++){var o=s[c];0!==a[o]&&(r=!1)}r&&(i.splice(t--,1),e=n(n.s=s[0]))}return e}var r={},a={app:0},i=[];function n(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=r,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/nfq-academy-task/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"02a9":function(e,t,s){},"2de0":function(e,t,s){"use strict";var r=s("d85e"),a=s.n(r);a.a},3392:function(e,t,s){"use strict";var r=s("c86a"),a=s.n(r);a.a},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var r=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],n=s("2877"),c={},o=Object(n["a"])(c,a,i,!1,null,null,null),u=o.exports,l=s("8c4f"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Title",{attrs:{name:"Administration Page",show:!0}}),s("div",{staticClass:"row justify-content-center"},[s("Button",{directives:[{name:"show",rawName:"v-show",value:!e.hideButton,expression:"!hideButton"}],attrs:{name:"Import Data",classes:"btn-success"},on:{click:e.importData}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingState,expression:"loadingState"}],staticClass:"spinner-border text-success"}),s("Button",{directives:[{name:"show",rawName:"v-show",value:e.isDataImported,expression:"isDataImported"}],attrs:{name:"Board Page",classes:"btn-success"},on:{click:e.toBoardPage}}),s("Button",{directives:[{name:"show",rawName:"v-show",value:e.isDataImported,expression:"isDataImported"}],attrs:{name:"Specialist Page",classes:"btn-success"},on:{click:e.toSpecialistPage}}),s("Button",{directives:[{name:"show",rawName:"v-show",value:e.isDataImported,expression:"isDataImported"}],attrs:{name:"Customer Page",classes:"btn-success"},on:{click:e.toCustomerPage}})],1),s("div",{staticClass:"row justify-content-center mt-3"},[s("span",[e._v(e._s(e.errorMessage))])]),s("Title",{attrs:{name:"Registration",show:e.isDataImported}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDataImported,expression:"isDataImported"}]},[s("div",{staticClass:"row mt-3"},[s("Select",{attrs:{items:e.specialists,model:e.selectedSpecialist,placeholder:"Select Specialist"},on:{"update:model":function(t){e.selectedSpecialist=t}}})],1),s("div",{staticClass:"row mt-3 justify-content-center"},[s("Button",{attrs:{name:"Register",classes:"btn-success"},on:{click:e.createNewCustomer}})],1),s("div",{staticClass:"row mt-3 justify-content-center"},[s("span",{staticClass:"message-color"},[e._v(e._s(e.registrationMessage))])])])],1)},m=[],f=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("7514"),s("c5f6"),s("bd86")),d=s("2f62"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"btn mx-2",class:e.classes,on:{click:function(t){return t.preventDefault(),e.$emit("click")}}},[e._v("\n\t"+e._s(e.name)+"\n")])},v=[],g={props:["name","classes"]},b=g,y=Object(n["a"])(b,h,v,!1,null,null,null),w=y.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-group justify-content-center"},[s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"select"}},[e._v(e._s(e.placeholder))])]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],staticClass:"custom-select col-md-4",attrs:{id:"select"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedValue=t.target.multiple?s:s[0]},function(t){return e.$emit("update:model",e.selectedValue)}]}},e._l(e.items,(function(t){return s("option",[e._v("\n\t\t\t"+e._s(t)+"\n\t\t")])})),0)])},S=[],j={props:["items","model","placeholder"],data:function(){return{selectedValue:null}}},D=j,P=Object(n["a"])(D,O,S,!1,null,null,null),C=P.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h3",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"title my-3"},[e._v("\n\t"+e._s(e.name)+"\n")])},x=[],I={props:["name","show"]},T=I,N=(s("76c5"),Object(n["a"])(T,_,x,!1,null,"a2b69d1e",null)),k=N.exports;function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function B(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(s,!0).forEach((function(t){Object(f["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var E={components:{Button:w,Select:C,Title:k},data:function(){return{selectedSpecialist:null}},methods:B({},Object(d["b"])(["importSpecialistData","createCustomer"]),{importData:function(){var e=Math.floor(Date.now()/1e3);this.importSpecialistData(e)},toBoardPage:function(){he.push("/board")},toSpecialistPage:function(){he.push("/specialist")},toCustomerPage:function(){he.push("/customer")},createNewCustomer:function(){var e={specialist:this.selectedSpecialist,code:Number(this.selectedSpecialistCode),creationTimestamp:Math.floor(Date.now()/1e3)};this.createCustomer(e)}}),computed:B({},Object(d["c"])(["specialists","isDataImported","registrationMessage","errorMessage","hideButton","loadingState"]),{specialistsWithCode:function(){return this.specialists.map((function(e,t){return{name:e,code:t+1+"000"}}))},selectedSpecialistCode:function(){var e=this;return null!==this.selectedSpecialist?this.specialistsWithCode.find((function(t){return t.name===e.selectedSpecialist})).code:""}})},A=E,$=(s("3392"),Object(n["a"])(A,p,m,!1,null,"1af6e318",null)),V=$.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"row justify-content-around"},e._l(e.timePerSpecialist,(function(t,r){return s("table",{key:r,staticClass:"table table-bordered col-3"},[s("thead",{staticClass:"text-center"},[s("th",[e._v(e._s(t.specialist)+" Time until next meeting approx.: "+e._s(t.averageTime)+" s")])]),s("tbody",{staticClass:"text-center"},e._l(e.filteredCustomers(t.specialist),(function(t,r){return s("tr",{key:r,staticClass:"first-customer"},[s("td",[e._v(e._s(t.customer))])])})),0)])})),0)])},L=[];s("55dd");function R(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function W(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?R(s,!0).forEach((function(t){Object(f["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var q={mounted:function(){this.refreshData()},methods:W({},Object(d["b"])(["refreshData"]),{filteredCustomers:function(e){return this.specialistDataArray.filter((function(t){if(!t.served)return t.specialist===e})).sort((function(e,t){return e.customer>t.customer?1:e.customer<t.customer?-1:0}))}}),computed:W({},Object(d["c"])(["specialistDataArray","timePerSpecialist"]))},H=q,Y=(s("5c26"),Object(n["a"])(H,J,L,!1,null,"764d4f80",null)),z=Y.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Title",{attrs:{name:"Specialist Page",show:!0}}),s("Select",{attrs:{items:e.specialists,model:e.selectedSpecialist,placeholder:"Select Specialist"},on:{"update:model":function(t){e.selectedSpecialist=t}}}),null!==e.selectedSpecialist?s("div",{staticClass:"container col-4 mt-3"},[s("table",{staticClass:"table table-bordered"},[e._m(0),s("tbody",{staticClass:"text-center"},e._l(e.selectedSpecialistData,(function(t,r){return s("tr",{key:r},[s("td",{directives:[{name:"show",rawName:"v-show",value:!t.served,expression:"!item.served"}]},[e._v(e._s(t.customer))]),s("td",{directives:[{name:"show",rawName:"v-show",value:!t.served,expression:"!item.served"}]},[s("Button",{attrs:{name:"Served",classes:"btn-success"},on:{click:function(s){return e.customerServed(t)}}})],1)])})),0)])]):e._e()],1)},G=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",{staticClass:"text-center"},[s("th",[e._v("Customer")]),s("th",[e._v("Action")])])}];s("20d6");function K(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function Q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?K(s,!0).forEach((function(t){Object(f["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):K(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var U={components:{Select:C,Button:w,Title:k},data:function(){return{selectedSpecialist:null}},mounted:function(){this.refreshData()},methods:Q({},Object(d["b"])(["updateCustomer","refreshData"]),{customerServed:function(e){function t(t){return t===e}var s=Q({},e,{servedCustomerIndex:this.specialistDataArray.findIndex(t),serveTimestamp:Math.floor(Date.now()/1e3)});console.log(s.servedCustomerIndex),this.updateCustomer(s)}}),computed:Q({},Object(d["c"])(["specialists","specialistDataArray"]),{selectedSpecialistData:function(){var e=this;return this.specialistDataArray.filter((function(t){return t.specialist===e.selectedSpecialist})).sort((function(e,t){return e.customer>t.customer?1:e.customer<t.customer?-1:0}))}})},X=U,Z=(s("7314"),Object(n["a"])(X,F,G,!1,null,"c7c7688e",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"row justify-content-center"},[s("Title",{attrs:{name:"Customer Page",show:!0}}),s("Input",{attrs:{placeholder:"Enter Your Number",model:e.customerNumber},on:{"update:model":function(t){e.customerNumber=t},change:function(t){return e.differentCustomer(e.interval)}}})],1),s("div",{staticClass:"row justify-content-center"},[s("Button",{attrs:{name:"Check Time",classes:"btn-success"},on:{click:function(t){return e.checkTime(e.customerNumber)}}}),s("Button",{directives:[{name:"show",rawName:"v-show",value:e.showTime&&!e.message.show,expression:"showTime && !message.show"}],attrs:{name:"Cancel",classes:"btn-danger"},on:{click:function(t){return e.cancelMeeting(e.customerNumber)}}})],1),s("div",{staticClass:"row justify-content-center mt-3"},[s("p",{directives:[{name:"show",rawName:"v-show",value:e.showTime&&!e.message.show,expression:"showTime && !message.show"}]},[e._v("\n\t\t\tWaiting time left: "),s("strong",[e._v(e._s(e.timeLeft))]),e._v(" seconds\n\t\t")]),e.showTime?s("p",{staticClass:"error-message"},[e._v(e._s(e.message.text))]):e._e()])])},se=[],re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-group justify-content-center mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"form-control col-md-4",attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.inputValue},on:{input:[function(t){t.target.composing||(e.inputValue=t.target.value)},function(t){return e.$emit("update:model",e.inputValue)}],change:function(t){return e.$emit("change")}}})])},ae=[],ie={props:["placeholder","model"],data:function(){return{inputValue:""}}},ne=ie,ce=Object(n["a"])(ne,re,ae,!1,null,null,null),oe=ce.exports;function ue(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function le(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ue(s,!0).forEach((function(t){Object(f["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ue(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var pe={components:{Input:oe,Button:w,Title:k},data:function(){return{customerNumber:null,timeLeft:null,interval:null,showTime:!1,message:""}},methods:le({},Object(d["b"])(["checkCustomerByNumber","cancelCustomer"]),{calculateTime:function(e){var t=this.specialistDataArray.find((function(t){return t.customer===e})),s=this.timePerSpecialist.find((function(e){return e.specialist===t.specialist})),r=s.averageTime,a=this.waitingCustomersBySpecialist.find((function(e){return e.specialist===s.specialist})).customers,i=Math.floor(Date.now()/1e3),n=a.indexOf(t),c=t.creationTimestamp-i+r*n;this.timeLeft=n>0&&c>0?c:0,this.showTime=!0},checkTime:function(e){var t=this,s=this.waitingCustomers.find((function(t){return t.customer===e}));void 0===s?(this.message={show:!0,text:"Number not found. Try different number."},this.showTime=!0):(this.calculateTime(e),this.message="",this.interval=setInterval((function(){t.calculateTime(e)}),5e3))},cancelMeeting:function(e){var t=this.waitingCustomers.find((function(t){return t.customer===e})),s=this.specialistDataArray.find((function(t){return t.customer===e})),r=this.specialistDataArray.indexOf(s);if(void 0===t)this.message={show:!0,text:"Can't cancel meeting, because number does not exist."};else{var a=le({},s,{customerIndex:r});this.cancelCustomer(a),this.message={show:!0,text:"Meeting cancelled successfully."}}},differentCustomer:function(e){clearInterval(e)}}),computed:le({},Object(d["c"])(["specialistDataArray","timePerSpecialist","specialists"]),{waitingCustomers:function(){return this.specialistDataArray.filter((function(e){return!e.served})).sort((function(e,t){return e.customer>t.customer?1:e.customer<t.customer?-1:0}))},waitingCustomersBySpecialist:function(){var e=this;return this.specialists.map((function(t){return{specialist:t,customers:e.waitingCustomers.filter((function(e){return e.specialist===t}))}}))}})},me=pe,fe=(s("2de0"),Object(n["a"])(me,te,se,!1,null,"e7a6381c",null)),de=fe.exports;r["a"].use(l["a"]);var he=new l["a"]({mode:"history",base:"/nfq-academy-task/",routes:[{path:"/",component:V},{path:"/board",component:z},{path:"/specialist",component:ee},{path:"/customer",component:de}]}),ve=s("bc3a"),ge=s.n(ve);function be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function ye(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?be(s,!0).forEach((function(t){Object(f["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):be(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var we={state:{isDataImported:!1,specialistDataArray:[],specialists:["Specialist 1","Specialist 2","Specialist 3"],registrationMessage:"",errorMessage:"",timePerSpecialist:[],hideButton:!1,loadingState:!1},getters:{specialistDataArray:function(e){return e.specialistDataArray},specialists:function(e){return e.specialists},isDataImported:function(e){return e.isDataImported},registrationMessage:function(e){return e.registrationMessage},errorMessage:function(e){return e.errorMessage},timePerSpecialist:function(e){return e.timePerSpecialist},hideButton:function(e){return e.hideButton},loadingState:function(e){return e.loadingState}},mutations:{setSpecialistData:function(e,t){e.specialistDataArray=t},setDataIsImported:function(e,t){e.isDataImported=t},setRegistrationMessage:function(e,t){e.registrationMessage=t},setErrorMessage:function(e,t){e.errorMessage=t},setTimePerSpecialist:function(e,t){e.timePerSpecialist=t},setHideButton:function(e,t){e.hideButton=t},setLoadingState:function(e,t){e.loadingState=t}},actions:{refreshData:function(e){var t=e.commit,s=e.state;s.specialistDataArray=[],s.timePerSpecialist=[];for(var r=[],a=0;a<localStorage.length;a++){var i=JSON.parse(localStorage.getItem("item"+a));null!==i&&r.push(i)}for(var n=[],c=1;c<=localStorage.length;c++){var o=JSON.parse(localStorage.getItem("specialist"+c));null!==o&&n.push(o)}t("setSpecialistData",r),t("setTimePerSpecialist",n),t("setDataIsImported",!0)},importSpecialistData:function(e,t){var s=e.dispatch,r=e.commit,a=e.state;r("setLoadingState",!0),r("setHideButton",!0),ge.a.get("https://api.myjson.com/bins/ipa2x").then((function(e){e.data.forEach((function(e,t){localStorage.setItem("item"+t,JSON.stringify(e))}));var s=a.specialists.map((function(t){return{specialist:t,specialistData:e.data.filter((function(e){return e.specialist===t}))}})),r=a.specialists.map((function(e){var r=s.find((function(t){return t.specialist===e})).specialistData,a=r.reduce((function(e,t){return e+t.timeSpent}),0)/r.length;return{specialist:e,averageTime:a,timestamp:t}}));r.forEach((function(e,t){localStorage.setItem("specialist"+Number(t+1),JSON.stringify(e))}))})).then((function(){s("refreshData")})).catch((function(){r("setErrorMessage","Customer data import failed. Please try again later.")})).finally((function(){r("setLoadingState",!1)}))},updateCustomer:function(e,t){var s=e.dispatch,r=e.state;localStorage.removeItem("item"+t.servedCustomerIndex);var a=r.timePerSpecialist.find((function(e){return e.specialist===t.specialist})),i=r.timePerSpecialist.indexOf(a),n={specialist:a.specialist,averageTime:a.averageTime,timestamp:t.serveTimestamp};localStorage.removeItem("specialist"+Number(i+1)),localStorage.setItem("specialist"+Number(i+1),JSON.stringify(n));var c=ye({},t,{},a);s("updateCustomerStatus",c)},updateCustomerStatus:function(e,t){var s=e.dispatch,r=(e.state,{specialist:t.specialist,customer:t.customer,served:!0,timeSpent:t.serveTimestamp-t.timestamp});localStorage.setItem("item"+t.servedCustomerIndex,JSON.stringify(r)),s("refreshData")},createCustomer:function(e,t){var s=e.dispatch,r=e.state,a=e.commit,i=r.specialistDataArray.filter((function(e){return e.specialist===t.specialist})),n={specialist:t.specialist,customer:String(t.code+i.length+1),creationTimestamp:t.creationTimestamp};localStorage.setItem("item"+r.specialistDataArray.length,JSON.stringify(n)),s("refreshData"),a("setRegistrationMessage","Registration was successful. Your number is: ".concat(n.customer,"."))},cancelCustomer:function(e,t){var s=e.dispatch,r={specialist:t.specialist,customer:t.customer,served:"cancelled"};localStorage.removeItem("item"+t.customerIndex),localStorage.setItem("item"+t.customerIndex,JSON.stringify(r)),s("refreshData")}}};r["a"].use(d["a"]);var Oe=new d["a"].Store({modules:{SpecialistData:we}});r["a"].config.productionTip=!1,new r["a"]({router:he,store:Oe,render:function(e){return e(u)}}).$mount("#app")},"5c26":function(e,t,s){"use strict";var r=s("02a9"),a=s.n(r);a.a},7314:function(e,t,s){"use strict";var r=s("e05f"),a=s.n(r);a.a},"76c5":function(e,t,s){"use strict";var r=s("e6e8"),a=s.n(r);a.a},c86a:function(e,t,s){},d85e:function(e,t,s){},e05f:function(e,t,s){},e6e8:function(e,t,s){}});
//# sourceMappingURL=app.b03881f7.js.map